<mat-card class="product-card">
  @if (product) {
  <div class="image-container">
    <img [src]="getSafeImage(product.imagem)" alt="{{ product.nome }}" (error)="handleImageError($event)"
      (load)="handleImageLoad()" class="product-image" [class.hidden]="isImageLoading" />

    @if (isImageLoading) {
    <div class="image-skeleton"></div>
    }

  </div>

  <mat-card-content>
    <h3>{{ product.nome }}</h3>
    <p class="price">{{ product.preco | currency:'BRL' }}</p>
    <p class="brand">{{ product.marca }}</p>
  </mat-card-content>

  <mat-card-actions align="end">
    @if (product.disponivel) {
    <button mat-raised-button color="primary" (click)="addToCart()">
      <mat-icon>add_shopping_cart</mat-icon>
      Adicionar
    </button>
    } @else {
    <button mat-button disabled class="unavailable">
      <mat-icon>block</mat-icon>
      Indispon√≠vel
    </button>
    }
  </mat-card-actions>
  }@else {
  <div class="skeleton-loader">
    <div class="image-placeholder"></div>
    <div class="text-placeholder"></div>
  </div>
  }
</mat-card>
